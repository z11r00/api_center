{
    "props": {
        "pageProps": {
            "query": {
                "id": "83c5c539fd5b42c69597a08886426868"
            },
            "ieBrowser": false,
            "needRefresh": false,
            "writingDetail": {
                "id": 85311,
                "outId": "83c5c539fd5b42c69597a08886426868",
                "articleOutId": "83c5c539fd5b42c69597a08886426868",
                "html": "<h1 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Python优雅地绘制北半球投影地图</span><span class=\"suffix\"></span></h1> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">经常在Nature正刊和子刊中看到北半球或南半球投影的球形地图，非常美观~</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">这种图ArcGIS往往不方便绘制</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">在子刊***Nat. Clim. Chang.***中，通过北极俯视投影表示NAO和AO的EOF分解。</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/dfdd2d18-35f2-4f06-af65-54e24270769f.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">Hamouda, M.E., Pasquero, C. &amp; Tziperman, E. Decoupling of the Arctic Oscillation and North Atlantic Oscillation in a warmer climate. <em style=\"font-style: italic; color: black;\"><strong style=\"font-weight: bold; color: black;\">Nat. Clim. Chang.</strong></em> <strong style=\"font-weight: bold; color: black;\">11</strong>, 137–142 (2021). https://doi.org/10.1038/s41558-020-00966-8</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">如子刊Nature Geosci中表示了海冰的漂移，还添加了DEM底图，非常美观。</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/eec5126f-87a9-4948-8ca3-dff9e7a35e9c.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">Darby, D., Ortiz, J., Grosch, C. <em style=\"font-style: italic; color: black;\">et al.</em> 1,500-year cycle in the Arctic Oscillation identified in Holocene Arctic sea-ice drift. <em style=\"font-style: italic; color: black;\"><strong style=\"font-weight: bold; color: black;\">Nature Geosci</strong></em> <strong style=\"font-weight: bold; color: black;\">5</strong>, 897–900 (2012). https://doi.org/10.1038/ngeo1629</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">接下来让我们复现一下试试</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">数据</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">以海温数据为例，ERA5月温度平均，是一张721*1440的0.25degTIF</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;rioxarray&nbsp;as&nbsp;rxr<br>file_name=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'/home/mw/project/SST.tif'</span>&nbsp;<br>ds=rxr.open_rasterio(file_name)<br>data&nbsp;=&nbsp;ds[0]<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">如果你有其它nc数据，也可以通过xarray读取</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">投影设置</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">其实cartopy提供了一些投影使用</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">如AzimuthalEquidistant</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">这是一种等距方位投影，是指<strong style=\"font-weight: bold; color: black;\">使图上面积和相应的实际地面面积相等的方位投影</strong>，分为正轴，横轴、斜轴投影。其中纬线为同心圆弧，经线为圆的半径。该投影提供了围绕中心位置的精确角度和距离。其他角度、距离或区域可能会变形。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">北半球的投影叫做AzimuthalEquidistant cartopy的投影列表是有这个投影的： https://scitools.org.uk/cartopy/docs/latest/reference/projections.html <img src=\"https://files.mdnice.com/user/40204/118b374f-1d13-4a46-9c9a-6b7cde972d5d.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"></p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br>import&nbsp;cartopy.crs&nbsp;as&nbsp;ccrs<br><br>plt.figure(figsize=(6,&nbsp;6))<br>ax&nbsp;=&nbsp;plt.axes(projection=ccrs.AzimuthalEquidistant(central_latitude=90))<br>ax.coastlines()<br>ax.gridlines()<br>ax.stock_img()<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/a10e43a1-7ca6-4a38-86b6-f28f552ab9a8.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">绘图代码</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">接下来我们把数据添加</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br>import&nbsp;cartopy.crs&nbsp;as&nbsp;ccrs<br>import&nbsp;numpy&nbsp;as&nbsp;np<br>import&nbsp;cartopy.feature&nbsp;as&nbsp;cfeature<br>import&nbsp;matplotlib.path&nbsp;as&nbsp;mpath<br>import&nbsp;mplotutils&nbsp;as&nbsp;mpu<br>from&nbsp;utils&nbsp;import&nbsp;plot<br><br>fig&nbsp;=&nbsp;plt.figure()<br><br>proj=ccrs.AzimuthalEquidistant(central_latitude=90)<br>ax&nbsp;=&nbsp;fig.add_subplot(111,&nbsp;projection=proj)<br>levels&nbsp;=&nbsp;np.linspace(270,&nbsp;300,&nbsp;num=31)<br>data_renamed&nbsp;=&nbsp;data.rename({<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'x'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lon'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'y'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lat'</span>})<br>h&nbsp;=&nbsp;plot.one_map_flat(data_renamed,&nbsp;ax,&nbsp;levels=levels,&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"BrBG_r\"</span>,&nbsp;mask_ocean=False,&nbsp;add_coastlines=True,&nbsp;add_land=False,&nbsp;plotfunc=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"contourf\"</span>)<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">其中<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;\">plot.one_map_flat</code>是我之前撰写的绘图函数，感兴趣的同学可见相关推送</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/7e5c5f66-cc32-44fd-b586-dc383879d38b.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">现在的结果看起来不错，但太大了，我们如果只需要北半球的数据，则需要指定经纬度。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">我们使用<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;\">ax.set_extent([-180, 180, 30, 90])</code>将经纬度指定在30°-90°</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br>import&nbsp;cartopy.crs&nbsp;as&nbsp;ccrs<br>import&nbsp;numpy&nbsp;as&nbsp;np<br>import&nbsp;cartopy.feature&nbsp;as&nbsp;cfeature<br>import&nbsp;matplotlib.path&nbsp;as&nbsp;mpath<br>import&nbsp;mplotutils&nbsp;as&nbsp;mpu<br><br>fig&nbsp;=&nbsp;plt.figure()<br><br>proj=ccrs.AzimuthalEquidistant(central_latitude=90)<br>ax&nbsp;=&nbsp;fig.add_subplot(111,&nbsp;projection=proj)<br>levels&nbsp;=&nbsp;np.linspace(270,&nbsp;300,&nbsp;num=31)<br>data_renamed&nbsp;=&nbsp;data.rename({<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'x'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lon'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'y'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lat'</span>})<br>h&nbsp;=&nbsp;plot.one_map_flat(data_renamed,&nbsp;ax,&nbsp;levels=levels,&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"BrBG_r\"</span>,&nbsp;mask_ocean=False,&nbsp;add_coastlines=True,&nbsp;add_land=False,&nbsp;plotfunc=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"contourf\"</span>)<br><br>ax.set_extent([-180,&nbsp;180,&nbsp;30,&nbsp;90],&nbsp;crs=ccrs.PlateCarree())<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/c3ea96a6-b865-4fa1-9c44-078c6aed5a08.png\" alt=\"image-20240613155059641\" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">\n   image-20240613155059641 \n </figcaption> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">再次添加更多要素：</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br>import&nbsp;cartopy.crs&nbsp;as&nbsp;ccrs<br>import&nbsp;numpy&nbsp;as&nbsp;np<br>import&nbsp;cartopy.feature&nbsp;as&nbsp;cfeature<br>import&nbsp;matplotlib.path&nbsp;as&nbsp;mpath<br>import&nbsp;mplotutils&nbsp;as&nbsp;mpu<br><br>fig&nbsp;=&nbsp;plt.figure()<br><br>proj=ccrs.AzimuthalEquidistant(central_latitude=90)<br>ax&nbsp;=&nbsp;fig.add_subplot(111,&nbsp;projection=proj)<br>levels&nbsp;=&nbsp;np.linspace(270,&nbsp;300,&nbsp;num=31)<br>data_renamed&nbsp;=&nbsp;data.rename({<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'x'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lon'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'y'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lat'</span>})<br>h&nbsp;=&nbsp;plot.one_map_flat(data_renamed,&nbsp;ax,&nbsp;levels=levels,&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"BrBG_r\"</span>,&nbsp;mask_ocean=False,&nbsp;add_coastlines=True,&nbsp;add_land=False,&nbsp;plotfunc=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"contourf\"</span>)<br><br>ax.set_extent([-180,&nbsp;180,&nbsp;30,&nbsp;90],&nbsp;crs=ccrs.PlateCarree())<br><br>ax.add_feature(cfeature.OCEAN)<br>ax.add_feature(cfeature.LAND,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'black'</span>)<br>ax.add_feature(cfeature.LAKES,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'black'</span>)<br>ax.add_feature(cfeature.RIVERS)<br>ax.stock_img()<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/d2e8d572-895d-4fc0-be91-f039e12a2e6b.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; color: black; list-style-type: disc;\"> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\"> <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;\">proj=ccrs.AzimuthalEquidistant(central_latitude=90), ax = plt.axes(projection=proj)</code>仅在定义图层的时候设置为该投影，其余设置content，绘制contourf都是PlateCaree \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">\n    绘制完结果也是正方形，和ArcGIS差不多，见之前的推文 \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; color: rgb(1,1,1); font-weight: 500;\">\n    cartopy灵活的地方在于适配matplotlib，因此可以设置一圆形进行相交： \n  </section></li> \n</ul> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br>import&nbsp;cartopy.crs&nbsp;as&nbsp;ccrs<br>import&nbsp;numpy&nbsp;as&nbsp;np<br>import&nbsp;cartopy.feature&nbsp;as&nbsp;cfeature<br>import&nbsp;matplotlib.path&nbsp;as&nbsp;mpath<br>import&nbsp;mplotutils&nbsp;as&nbsp;mpu<br><br>fig&nbsp;=&nbsp;plt.figure()<br><br>proj=ccrs.AzimuthalEquidistant(central_latitude=90)<br>ax&nbsp;=&nbsp;fig.add_subplot(111,&nbsp;projection=proj)<br>levels&nbsp;=&nbsp;np.linspace(270,&nbsp;300,&nbsp;num=31)<br>data_renamed&nbsp;=&nbsp;data.rename({<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'x'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lon'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'y'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lat'</span>})<br>h&nbsp;=&nbsp;plot.one_map_flat(data_renamed,&nbsp;ax,&nbsp;levels=levels,&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"BrBG_r\"</span>,&nbsp;mask_ocean=False,&nbsp;add_coastlines=True,&nbsp;add_land=False,&nbsp;plotfunc=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"contourf\"</span>)<br><br>ax.set_extent([-180,&nbsp;180,&nbsp;30,&nbsp;90],&nbsp;crs=ccrs.PlateCarree())<br>ax.add_feature(cfeature.OCEAN)<br>ax.add_feature(cfeature.LAND,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'black'</span>)<br>ax.add_feature(cfeature.LAKES,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'black'</span>)<br>ax.add_feature(cfeature.RIVERS)<br>ax.stock_img()<br><br>theta&nbsp;=&nbsp;np.linspace(0,&nbsp;2*np.pi,&nbsp;100)<br>center,&nbsp;radius&nbsp;=&nbsp;[0.5,&nbsp;0.5],&nbsp;0.5<br>verts&nbsp;=&nbsp;np.vstack([np.sin(theta),&nbsp;np.cos(theta)]).T<br>circle&nbsp;=&nbsp;mpath.Path(verts&nbsp;*&nbsp;radius&nbsp;+&nbsp;center)<br><span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#&nbsp;将该Path设置为GeoAxes的边界</span><br>ax.set_boundary(circle,&nbsp;transform=ax.transAxes)<br><br>cbar&nbsp;=&nbsp;mpu.colorbar(<br>&nbsp;&nbsp;&nbsp;&nbsp;h,&nbsp;ax1=ax,&nbsp;size=0.05,&nbsp;<span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#height</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shrink=0.05,&nbsp;<span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#width</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pad=0.1,&nbsp;orientation=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'horizontal'</span><br>)<br><br>cbar.ax.tick_params(labelsize=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'small'</span>)<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/6caa346a-9d11-49a7-b312-ade63f72e131.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">现在的结果相当不错了，只需要设置一下经纬度线</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;\"><span style=\"display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #1E1E1E; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #DCDCDC; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; padding-top: 15px; background: #1E1E1E; border-radius: 5px;\">import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br>import&nbsp;cartopy.crs&nbsp;as&nbsp;ccrs<br>import&nbsp;numpy&nbsp;as&nbsp;np<br>import&nbsp;cartopy.feature&nbsp;as&nbsp;cfeature<br>import&nbsp;matplotlib.path&nbsp;as&nbsp;mpath<br>import&nbsp;mplotutils&nbsp;as&nbsp;mpu<br><br>fig&nbsp;=&nbsp;plt.figure()<br><br>proj=ccrs.AzimuthalEquidistant(central_latitude=90)<br>ax&nbsp;=&nbsp;fig.add_subplot(111,&nbsp;projection=proj)<br>levels&nbsp;=&nbsp;np.linspace(270,&nbsp;300,&nbsp;num=31)<br>data_renamed&nbsp;=&nbsp;data.rename({<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'x'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lon'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'y'</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'lat'</span>})<br>h&nbsp;=&nbsp;plot.one_map_flat(data_renamed,&nbsp;ax,&nbsp;levels=levels,&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"BrBG_r\"</span>,&nbsp;mask_ocean=False,&nbsp;add_coastlines=True,&nbsp;add_land=False,&nbsp;plotfunc=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">\"contourf\"</span>)<br><br><br>ax.set_extent([-180,&nbsp;180,&nbsp;30,&nbsp;90],&nbsp;crs=ccrs.PlateCarree())<br><span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#&nbsp;添加各种特征</span><br>ax.add_feature(cfeature.OCEAN)<br>ax.add_feature(cfeature.LAND,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'black'</span>)<br>ax.add_feature(cfeature.LAKES,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'black'</span>)<br>ax.add_feature(cfeature.RIVERS)<br><span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#ax.add_feature(cfeature.BORDERS)</span><br>ax.stock_img()<br><br>theta&nbsp;=&nbsp;np.linspace(0,&nbsp;2*np.pi,&nbsp;100)<br>center,&nbsp;radius&nbsp;=&nbsp;[0.5,&nbsp;0.5],&nbsp;0.5<br>verts&nbsp;=&nbsp;np.vstack([np.sin(theta),&nbsp;np.cos(theta)]).T<br>circle&nbsp;=&nbsp;mpath.Path(verts&nbsp;*&nbsp;radius&nbsp;+&nbsp;center)<br><span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#&nbsp;将该Path设置为GeoAxes的边界</span><br>ax.set_boundary(circle,&nbsp;transform=ax.transAxes)<br><br>cbar&nbsp;=&nbsp;mpu.colorbar(<br>&nbsp;&nbsp;&nbsp;&nbsp;h,&nbsp;ax1=ax,&nbsp;size=0.05,&nbsp;<span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#height</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shrink=0.05,&nbsp;<span class=\"hljs-comment\" style=\"color: #57A64A; font-style: italic; line-height: 26px;\">#width</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pad=0.1,&nbsp;orientation=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'horizontal'</span><br>)<br><br>cbar.ax.tick_params(labelsize=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'small'</span>)<br><br>gls&nbsp;=&nbsp;ax.gridlines(draw_labels=True,&nbsp;crs=ccrs.PlateCarree(),&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;color=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'k'</span>,&nbsp;linestyle=<span class=\"hljs-string\" style=\"color: #D69D85; line-height: 26px;\">'dashed'</span>,&nbsp;linewidth=0.3,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dms=True,&nbsp;x_inline=False,&nbsp;y_inline=False,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xlocs=np.arange(-180,&nbsp;180&nbsp;+&nbsp;60,&nbsp;60),&nbsp;ylocs=np.arange(0,&nbsp;90&nbsp;+&nbsp;15,&nbsp;15)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)<br><br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/303104fc-f060-4fed-9207-e201816a892d.png\" alt=\"image-20240613155303429\" style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; color: #888; font-size: 14px;\">\n   image-20240613155303429 \n </figcaption> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">非常完美</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">感兴趣的同学可以后台回复【北半球】下载数据和代码</p>",
                "title": "Nature风格的北半球投影图，几行代码就能绘制...",
                "categoryId": 3,
                "categoryName": "人工智能",
                "tagId": 116,
                "tagName": "机器学习",
                "userId": 40204,
                "userOutId": "706880289656",
                "username": "LonghaoWang",
                "avatar": "https://files.mdnice.com/pic/20a54d83-6259-4b66-8689-c8ce6b9e8616.jpg",
                "description": "Python优雅地绘制北半球投影地图经常在Nature正刊和子刊中看到北半球或南半球投影的球形地图，非常美观~这种图ArcGIS往往不方便绘制在子刊***Nat.Clim.Chang.***中，通过北",
                "level": 2,
                "publishTime": "2024/10/19",
                "readingNum": 4,
                "likeNum": 0,
                "introduction": null,
                "followWords": null,
                "followPic": null,
                "isFollowing": false,
                "isLike": false,
                "isSelf": false,
                "type": 1,
                "isVisible": true,
                "invisibleReason": null,
                "writingColumn": {
                    "columnOutId": "ffe00cb8fcef4def81f23ac36ce58752",
                    "name": "默认专栏",
                    "briefIntro": "这是一个默认专栏",
                    "cover": "https://files.mdnice.com/common/community/default-column-cover.jpg",
                    "writingNum": 63,
                    "createTime": "2024-08-06 19:05"
                }
            }
        },
        "__N_SSP": true
    },
    "page": "/writing/[id]",
    "query": {
        "id": "83c5c539fd5b42c69597a08886426868"
    },
    "buildId": "ErZPkD4oq6iwH2nj6Dpcx",
    "isFallback": false,
    "gssp": true,
    "appGip": true
}