{
    "props": {
        "pageProps": {
            "query": {
                "id": "ed1bb5dc2a7c4ce98f485451001dc424"
            },
            "ieBrowser": false,
            "needRefresh": false,
            "writingDetail": {
                "id": 85264,
                "outId": "ed1bb5dc2a7c4ce98f485451001dc424",
                "articleOutId": "ed1bb5dc2a7c4ce98f485451001dc424",
                "html": "<h1 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 24px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\">Python 中的空间插值</span><span class=\"suffix\"></span></h1> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">在地理数据处理和分析中，空间插值是一项非常有用的技术，特别是在我们面对不完整的地理数据时。无论是在气候数据、环境监测数据，还是人口统计数据中，缺失的数据点都会对分析结果造成影响。在这篇文章中，我们将探讨如何在 Python 中利用空间插值技术，特别是反距离加权法（IDW），来推断缺失的空间数据点，并且会以非洲国家的人口密度为示例进行演示。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">什么是反距离加权 (IDW)？</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">反距离加权 (IDW) 是一种简单而有效的空间插值方法，其核心思想基于第一地理定律，即“越近越相似”。具体来说，它假设离已知数据点越近的地方，其未知值越接近这些已知点的值。IDW 方法通过对周围点的距离进行加权平均，从而估算出目标点的值。由于它的直观性和易于实现，IDW 在地理信息系统（GIS）领域中被广泛使用。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">数据准备</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">为了演示 IDW 方法，我们使用 GeoPandas 的内置地图数据集“naturalearth_lowres”。该数据集由 Natural Earth 提供，包含了全球各国家的边界和相关统计数据。我们首先将数据集过滤到非洲大陆，并计算每个国家的人口密度。虽然精确的面积计算通常需要将几何数据转换为投影坐标系，但在本文中，我们将简化处理，直接使用现有的经纬度数据来计算。</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Library&nbsp;import</span><br>import&nbsp;geopandas&nbsp;as&nbsp;gpd<br>import&nbsp;numpy&nbsp;as&nbsp;np<br>import&nbsp;matplotlib.pyplot&nbsp;as&nbsp;plt<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Load&nbsp;world&nbsp;countries&nbsp;dataset</span><br>gdf&nbsp;=&nbsp;gpd.read_file(gpd.datasets.get_path(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'naturalearth_lowres'</span>))<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Filter&nbsp;for&nbsp;Africa</span><br>gdf_africa&nbsp;=&nbsp;gdf[gdf[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'continent'</span>]&nbsp;==&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'Africa'</span>]<br><br>gdf_africa[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'area'</span>]&nbsp;=&nbsp;gdf_africa.geometry.area<br>gdf_africa[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>]&nbsp;=&nbsp;gdf_africa[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_est'</span>]&nbsp;/&nbsp;gdf_africa[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'area'</span>]<br>gdf_africa.head(5)<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/3827b9d4-7abb-4a70-8eb4-a339c18ad386.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">在这个数据集中，‘area’代表国家的面积，‘pop_est’是人口估计值，而‘pop_density’则是我们计算得出的人口密度。在接下来的步骤中，我们将模拟一些缺失数据，并使用 IDW 方法来推断这些缺失点的值。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">模拟缺失数据</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">为了测试 IDW 插值的效果，我们将在非洲地图的 GeoDataFrame 中随机选择几个国家，然后人为地将这些国家的人口密度值设为缺失值。</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;get&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;original&nbsp;data</span><br>gdf_africa_missing&nbsp;=&nbsp;gdf_africa.copy()<br><br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Simulating&nbsp;missing&nbsp;data,&nbsp;with&nbsp;4&nbsp;randomly&nbsp;picked&nbsp;countries</span><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;By&nbsp;introduce&nbsp;missing&nbsp;values</span><br>indices_to_replace&nbsp;=&nbsp;np.asarray([57,&nbsp;78,&nbsp;48,&nbsp;65])&nbsp;&nbsp;<br>gdf_africa_missing.loc[indices_to_replace,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>]&nbsp;=&nbsp;np.nan<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">接下来，我们可以将这些数据的原始分布与缺失数据的分布进行可视化对比。</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Show&nbsp;missing&nbsp;data</span><br>vmin&nbsp;=&nbsp;gdf_africa_missing.pop_density.min()<br>vmax&nbsp;=&nbsp;gdf_africa_missing.pop_density.max()<br><br>f,&nbsp;ax&nbsp;=&nbsp;plt.subplots(1,&nbsp;2,&nbsp;figsize=(10,&nbsp;5))<br><br>gdf_africa.plot(column=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>,&nbsp;ax=ax[0],&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pink'</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'k'</span>,&nbsp;vmin=vmin,&nbsp;vmax=vmax,&nbsp;legend=True)<br><br>gdf_africa_missing.plot(color=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'none'</span>,&nbsp;ax=ax[1],&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'k'</span>)<br><br>gdf_africa_missing.plot(column=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>,&nbsp;ax=ax[1],&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pink'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'k'</span>,&nbsp;vmin=vmin,&nbsp;vmax=vmax,&nbsp;legend=True)<br><br>ax[0].set_title(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Population&nbsp;density&nbsp;-&nbsp;Original\"</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontsize&nbsp;=&nbsp;12,&nbsp;pad&nbsp;=&nbsp;12)<br>ax[1].set_title(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Population&nbsp;density&nbsp;-&nbsp;Missing&nbsp;values\"</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontsize&nbsp;=&nbsp;12,&nbsp;pad&nbsp;=&nbsp;12)<br><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">for</span>&nbsp;aax&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">in</span>&nbsp;ax:<br>&nbsp;&nbsp;&nbsp;&nbsp;aax.axis(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'off'</span>)<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/bc6f0057-beb2-48c9-8875-44f58b552999.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">通过这些可视化图，可以清晰地看到原始地图中的人口密度分布以及我们手动设置为缺失的数据点。接下来，我们将使用 IDW 方法对这些缺失数据进行插值。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">空间插值</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">数据准备就绪后，我们可以使用 SciPy 库中的 <code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;\">cKDTree</code> 进行 IDW 插值。<code style=\"font-size: 14px; word-wrap: break-word; padding: 2px 4px; border-radius: 4px; margin: 0 2px; color: #1e6bb8; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all;\">cKDTree</code> 是一个快速的 k 近邻搜索算法，用于高效查找距离最近的已知点并计算权重。</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Importing&nbsp;scipy</span><br>from&nbsp;scipy.spatial&nbsp;import&nbsp;cKDTree<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Defining&nbsp;e&nbsp;function&nbsp;to&nbsp;perform&nbsp;the&nbsp;IDW</span><br>def&nbsp;idw_interpolation(xi,&nbsp;yi,&nbsp;zi,&nbsp;xi_interp,&nbsp;yi_interp,&nbsp;power=2):<br>&nbsp;&nbsp;&nbsp;&nbsp;tree&nbsp;=&nbsp;cKDTree(np.c_[xi,&nbsp;yi])<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;k&nbsp;nearest&nbsp;neighbors</span><br>&nbsp;&nbsp;&nbsp;&nbsp;distances,&nbsp;idx&nbsp;=&nbsp;tree.query(np.c_[xi_interp,&nbsp;yi_interp],&nbsp;k=8)&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;weights&nbsp;=&nbsp;1&nbsp;/&nbsp;distances**power<br>&nbsp;&nbsp;&nbsp;&nbsp;weights&nbsp;/=&nbsp;weights.sum(axis=1)[:,&nbsp;None]<br>&nbsp;&nbsp;&nbsp;&nbsp;zi_interp&nbsp;=&nbsp;np.sum(weights&nbsp;*&nbsp;zi[idx],&nbsp;axis=1)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">return</span>&nbsp;zi_interp<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Prepare&nbsp;data&nbsp;for&nbsp;interpolation</span><br>gdf_africa_interpol&nbsp;=&nbsp;gdf_africa_missing.copy()<br>known&nbsp;=&nbsp;gdf_africa_interpol[gdf_africa_interpol[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>].notna()]<br>unknown&nbsp;=&nbsp;gdf_africa_interpol[gdf_africa_interpol[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>].isna()]<br><br>xi&nbsp;=&nbsp;known.geometry.centroid.x.values<br>yi&nbsp;=&nbsp;known.geometry.centroid.y.values<br>zi&nbsp;=&nbsp;known[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>].values<br><br>xi_interp&nbsp;=&nbsp;unknown.geometry.centroid.x.values<br>yi_interp&nbsp;=&nbsp;unknown.geometry.centroid.y.values<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Perform&nbsp;IDW&nbsp;interpolation</span><br>zi_interp&nbsp;=&nbsp;idw_interpolation(xi,&nbsp;yi,&nbsp;zi,&nbsp;xi_interp,&nbsp;yi_interp)<br><br><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Assign&nbsp;interpolated&nbsp;values&nbsp;back&nbsp;to&nbsp;the&nbsp;GeoDataFrame</span><br>gdf_africa_interpol.loc[gdf_africa_interpol[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>].isna(),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>]&nbsp;=&nbsp;zi_interp<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">此时，插值后的数据已经生成。我们可以将插值后的地图与原始地图并排显示，来观察 IDW 方法的效果。</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Plot&nbsp;the&nbsp;results</span><br>f,&nbsp;ax&nbsp;=&nbsp;plt.subplots(1,&nbsp;2,&nbsp;figsize=(10,&nbsp;5))<br><br>gdf_africa.plot(column=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>,&nbsp;ax=ax[0],&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pink'</span>,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'k'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vmin=vmin,&nbsp;vmax=vmax,&nbsp;legend=True)<br><br>gdf_africa_interpol.plot(color=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'none'</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ax=ax[1],&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'k'</span>)<br><br>gdf_africa_interpol.plot(column=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>,&nbsp;ax=ax[1],&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cmap=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pink'</span>,&nbsp;edgecolor=<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'k'</span>,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vmin=vmin,&nbsp;vmax=vmax,&nbsp;legend=True)<br><br>ax[0].set_title(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Population&nbsp;density&nbsp;-&nbsp;Original\"</span>,&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontsize&nbsp;=&nbsp;12,&nbsp;pad&nbsp;=&nbsp;12)<br>ax[1].set_title(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Population&nbsp;density&nbsp;-&nbsp;Interpolated\"</span>,&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fontsize&nbsp;=&nbsp;12,&nbsp;pad&nbsp;=&nbsp;12)<br><br><span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">for</span>&nbsp;aax&nbsp;<span class=\"hljs-keyword\" style=\"color: #333; font-weight: bold; line-height: 26px;\">in</span>&nbsp;ax:<br>&nbsp;&nbsp;&nbsp;&nbsp;aax.axis(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'off'</span>)<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/1530fc8a-2aeb-45ad-820a-dbd4b9e0c923.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">从可视化结果中可以看出，插值地图与原始地图的分布情况非常接近，这表明 IDW 方法在推断缺失数据时表现良好。为了进一步验证这一点，我们将使用相关性分析来定量评估插值的准确性。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">相关性分析</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">最后，为了评估 IDW 插值的效果，我们将插值值与真实的原始值进行比较，并计算两者之间的相关性系数。</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px;\"><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #333; background: #f8f8f8; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; border-radius: 0px; font-size: 12px; -webkit-overflow-scrolling: touch;\"><span class=\"hljs-comment\" style=\"color: #998; font-style: italic; line-height: 26px;\">#&nbsp;Compare&nbsp;original&nbsp;and&nbsp;interpolated&nbsp;values&nbsp;for&nbsp;missing&nbsp;countries</span><br>missing_countries&nbsp;=&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">set</span>(gdf_africa_missing[gdf_africa_missing[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>].isna(\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)].name)<br><br>missing_original&nbsp;=&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gdf_africa[gdf_africa.name.isin(missing_countries)][[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'name'</span>,&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>]].set_index(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'name'</span>)<br><br>missing_interpol&nbsp;=&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gdf_africa_interpol[gdf_africa_interpol.name.isin(missing_countries)]\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[[<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'name'</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>]].rename(columns={<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density'</span>:&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'pop_density_interpol'</span>}).set_index(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'name'</span>)<br><br>interpol_comparison&nbsp;=&nbsp;missing_original.merge(missing_interpol,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;left_index=True,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;right_index=True)<br><br><span class=\"hljs-built_in\" style=\"color: #0086b3; line-height: 26px;\">print</span>(interpol_comparison.corr())<br><br>plt.plot(interpol_comparison.pop_density,&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpol_comparison.pop_density_interpol,&nbsp;<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">'o'</span>)<br>plt.xlabel(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Original&nbsp;Population&nbsp;Density\"</span>)<br>plt.ylabel(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Interpolated&nbsp;Population&nbsp;Density\"</span>)<br>plt.title(<span class=\"hljs-string\" style=\"color: #d14; line-height: 26px;\">\"Comparison&nbsp;of&nbsp;Original&nbsp;and&nbsp;Interpolated&nbsp;Values\"</span>)<br>plt.show()<br></code></pre> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/6afcbf64-da52-419d-8917-c181090cdcca.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40204/fc37aa4e-6acf-42ac-9fbc-fa9703f9e7be.png\" alt style=\"display: block; margin: 0 auto; max-width: 100%; border-radius: 10px; border: 3px solid #F7D3CC;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">结果表明，相关性系数（r）达到了0.94，表明 IDW 插值所得的人口密度与原始数据高度相关。这说明即使使用 IDW 这种相对简单的方法，也能够在缺失数据的情况下生成高质量的空间数据估计。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"background-color: #F7D3CC; color: #FFF; padding: 5px 15px; border-radius: 1px;\">结论</span><span class=\"suffix\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; margin: 0; line-height: 26px; color: black; font-size: 17px; word-spacing: 3px; letter-spacing: 1px;\">在本文中，我们展示了如何在 Python 中使用反距离加权法（IDW）进行空间插值，以推断缺失的地理数据。通过非洲的人口密度示例，我们验证了 IDW 方法的有效性。无论是在科研还是实际应用中，当面临缺失的空间数据时，IDW 都是一种强大且易于实现的工具。掌握这种技术，可以帮助我们在数据不完整的情况下，仍然能够获得可靠的分析结果。</p>",
                "title": "地理数据缺了怎么办？试试空间插值，真的很简单",
                "categoryId": 3,
                "categoryName": "人工智能",
                "tagId": 116,
                "tagName": "机器学习",
                "userId": 40204,
                "userOutId": "706880289656",
                "username": "LonghaoWang",
                "avatar": "https://files.mdnice.com/pic/20a54d83-6259-4b66-8689-c8ce6b9e8616.jpg",
                "description": "Python中的空间插值在地理数据处理和分析中，空间插值是一项非常有用的技术，特别是在我们面对不完整的地理数据时。无论是在气候数据、环境监测数据，还是人口统计数据中，缺失的数据点都会对分析结果造成影响",
                "level": 2,
                "publishTime": "2024/10/18",
                "readingNum": 4,
                "likeNum": 0,
                "introduction": null,
                "followWords": null,
                "followPic": null,
                "isFollowing": false,
                "isLike": false,
                "isSelf": false,
                "type": 1,
                "isVisible": true,
                "invisibleReason": null,
                "writingColumn": {
                    "columnOutId": "ffe00cb8fcef4def81f23ac36ce58752",
                    "name": "默认专栏",
                    "briefIntro": "这是一个默认专栏",
                    "cover": "https://files.mdnice.com/common/community/default-column-cover.jpg",
                    "writingNum": 63,
                    "createTime": "2024-08-06 19:05"
                }
            }
        },
        "__N_SSP": true
    },
    "page": "/writing/[id]",
    "query": {
        "id": "ed1bb5dc2a7c4ce98f485451001dc424"
    },
    "buildId": "ErZPkD4oq6iwH2nj6Dpcx",
    "isFallback": false,
    "gssp": true,
    "appGip": true
}