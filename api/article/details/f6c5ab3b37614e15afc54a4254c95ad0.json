{
    "props": {
        "pageProps": {
            "query": {
                "id": "f6c5ab3b37614e15afc54a4254c95ad0"
            },
            "ieBrowser": false,
            "needRefresh": false,
            "writingDetail": {
                "id": 83027,
                "outId": "f6c5ab3b37614e15afc54a4254c95ad0",
                "articleOutId": "f6c5ab3b37614e15afc54a4254c95ad0",
                "html": "<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">前端开发已经越来越深入啦~ <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">js也早就不仅仅是前端专属了</code>。<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">nodejs</code>已经<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">v20</code>啦~</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">如果你开发过小程序、app。不知道有没有做过海报分享、导出pdf文件等需求。今天就用<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">前端三件套</code>(html + css + js)弄个<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">导出pdf、图片功能</code>吧，并<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">提供 API 访问</code>。以便在其他服务/终端中调用。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">概览</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">本期两大主角：<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Puppeteer无头浏览器</code> + <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">fastify快速且低开销的web框架</code></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">前者处理<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">导出图片、pdf</code>，后者提供<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">API</code>和<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">静态资源</code>访问。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">为了方便服务器（<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Linux</code>）上测试部署，这次还使用 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">docker</code> 来构建部署服务。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">文章涉及知识点有点多，虽然我写了保姆级注释。但是如果你不熟悉，那么请多翻阅文档。</code></p> \n<h3 data-tool=\"mdnice编辑器\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(106, 27, 154, 0.65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/user/40173/c9b26c45-1394-4855-b64e-321ee72f823e.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>1. Puppeteer</span><span class=\"suffix\" style=\"display: none;\"></span></h3> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Puppeteer</code> 是一个由 Google 开发的 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Node.js</code> 库，它提供了一组高级 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">API</code> 来<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">控制 Chrome 或 Chromium 浏览器</code>。通过 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Puppeteer</code>，我们可以<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">模拟用户在浏览器中的操作</code>，如打开网页、点击按钮、填写表单等，还<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">可以进行页面截图和生成 PDF 文件</code>等操作。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><a href=\"https://puppeteer.bootcss.com/\" style=\"text-decoration: none; word-wrap: break-word; color: #6a1b9a; font-weight: normal; border-bottom: 1px solid #7b1fa2;\">puppeteer中文文档</a></p> \n<h3 data-tool=\"mdnice编辑器\" style=\"padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"border-bottom: 2px solid RGBA(106, 27, 154, 0.65); color: #2b2b2b; padding-bottom: 2px;\"><span style=\"width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/user/40173/c9b26c45-1394-4855-b64e-321ee72f823e.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;\"></span>2. Fastify</span><span class=\"suffix\" style=\"display: none;\"></span></h3> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code> 是一个<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">快速、低开销</code>的 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Node.js Web 框架</code>，它以<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">高性能</code>和<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">良好的扩展性</code>而闻名。Fastify 提供了简洁的 API 和丰富的插件系统，可以方便地构建各种类型的 Web 服务。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">OK、 主角介绍完了。你和主角能处到什么地步就靠各位自己了。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><a href=\"https://fastify.nodejs.cn/\" style=\"text-decoration: none; word-wrap: break-word; color: #6a1b9a; font-weight: normal; border-bottom: 1px solid #7b1fa2;\">fastify中文文档</a></p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">业务思考🤔</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">经过了解后，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">puppeteer</code>本质就是一个<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">浏览器</code>，所以肯定需要可以访问的 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">html页面</code>、图片、文件资源来展示。以便后续操作。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">需要可访问的<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">html页面</code>，可能你会想到<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">nginx</code>，但是别忘了主角<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code>不仅能提供API访问，还可以提供静态资源的访问。所以，先把web服务搞起来~</p> \n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\"> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    官方文档很重要！ \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    官方文档很重要！ \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    官方文档很重要！ \n  </section></li> \n</ul> \n<blockquote class=\"multiquote-1\" data-tool=\"mdnice编辑器\" style=\"display: block; font-size: 0.9em; overflow: auto; overflow-scrolling: touch; padding-top: 10px; padding-bottom: 10px; padding-left: 20px; padding-right: 10px; margin-bottom: 20px; margin-top: 20px; text-size-adjust: 100%; line-height: 1.55em; font-weight: 400; border-radius: 6px; color: #7b1fa2; font-style: normal; text-align: left; box-sizing: inherit; border-left: none; border: 1px solid RGBA(123, 31, 162, 0.4); background: RGBA(123, 31, 162, 0.1);\"> <span style=\"color: RGBA(123, 31, 162, 0.5); font-size: 12px; line-height: 1; font-weight: 700;\">❝</span> \n <p style=\"letter-spacing: 2px; font-size: 14px; word-spacing: 2px; margin: 0px; line-height: 26px; color: #595959; padding-top: 2px; padding-bottom: 2px;\">注意主角需要的 nodejs 版本哟~</p> <span style=\"float: right; color: RGBA(123, 31, 162, 0.5);\">❞</span> \n</blockquote> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">搭建Fastify web服务</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code>官网介绍呢，搭起来确实很快，但是呢，现在<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">前端都是工程化时代啦</code>、无论是 vue、还是 react 都是配的有 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">CLI</code> 的。所以，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code>肯定也是有的。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">全局安装 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">fastify-cli</code></p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">npm&nbsp;install&nbsp;--global&nbsp;fastify-cli<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">有求知欲的小伙伴可以输入看看 help</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">fastify&nbsp;--<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">help</span><br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">看看文档~</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/ae21862b-6d82-435d-b30b-8601d542313f.png\" alt=\"generate命令选项说明\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"> <span style=\"color: #7b1fa2; display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\">▲</span>generate命令选项说明 \n </figcaption> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">如上图，这里就不使用 TS 创建项目了，直接上 ESM</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">fastify&nbsp;generate&nbsp;myproject&nbsp;--esm<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">而后将得到如下工程：</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/abd4a792-3e00-456f-bf3e-8ad2f069c42b.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">有了<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">package.json</code> 前端的小伙伴就知道该怎么操作了吧？</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;安装依赖</span><br>npm&nbsp;i&nbsp;<br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;启动~</span><br>npm&nbsp;run&nbsp;dev<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">启动成功~</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/6d9ab282-da23-4663-a9ce-5d6495b9afb9.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">而后就可以访问看看啦~</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">http://127.0.0.1:3000/</code></p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/5a4fc88b-8bd4-4f5f-aea8-fcbad0b1cea5.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">添加Fastify插件</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">前面说到，我们要<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">提供API</code>、<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">静态html资源访问</code>。回想那段 CORS 跨域问题...</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">废话不多说，先看看 Fastify 生态：</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/b56af3ee-2cf9-4b62-9f42-ea2150c336c1.png\" alt=\"简直了~\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"> <span style=\"color: #7b1fa2; display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\">▲</span>简直了~ \n </figcaption> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">就一个字：x</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">找到我们需要的：</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/e7b63fed-bdd2-4e00-9326-2728999787e2.png\" alt=\"cors插件\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"> <span style=\"color: #7b1fa2; display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\">▲</span>cors插件 \n </figcaption> \n</figure> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/12f5b88f-f069-45a6-8319-392901815eab.png\" alt=\"static插件\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"> <span style=\"color: #7b1fa2; display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\">▲</span>static插件 \n </figcaption> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">然后安装...</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">npm&nbsp;i&nbsp;@fastify/cors&nbsp;@fastify/static<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">CLI</code>工程已经有了对应<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">plugin</code>目录。这里就<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">依葫芦画瓢</code>，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">新建两个插件</code>代码写写就好了。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><img src=\"https://files.mdnice.com/user/40173/c76f2fe3-dce1-4aae-bcd6-528af7388c50.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> <img src=\"https://files.mdnice.com/user/40173/5097b6b4-43c5-4b8a-8866-dd16d231c16a.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">注意这里<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">创建</code>了一个 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">public文件夹</code> 用于<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">存放静态资源</code>。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">这里ESM工程有个坑，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">nodejs内置的 __dirname 无法访问</code>。这里改成这种就好:</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>&nbsp;path&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"path\"</span>;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;__filename&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;URL(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>.meta.url).pathname;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;__dirname&nbsp;=&nbsp;path.dirname(__filename);<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">至于插件更多配置，大家一定要去看文档啊~~</code></p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">测试静态资源插件服务</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">在<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">public文件夹</code>下新增一个<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">index.html</code>文件</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/2f5c9782-9a29-4d97-8452-a4787eeffcef.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">而后访问：</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">http://127.0.0.1:3000/index.html</code></p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/5af1b382-079e-4fa0-b7a3-d0cdc7e56e3d.png\" alt=\"服务访问成功\" style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n <figcaption style=\"margin-top: 5px; text-align: center; display: block; font-size: 13px; color: #2b2b2b;\"> <span style=\"color: #7b1fa2; display: inline-block; width: 18px; height: 18px; background-size: 18px; background-repeat: no-repeat; background-position: center; margin-right: 5px; margin-bottom: -5px;\">▲</span>服务访问成功 \n </figcaption> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">至此，已经完成了一大步~ 至少我们呈现的东西有了。现在需要去处理 puppeteer 啦。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">叨扰puppeteer文档</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">如果非要说谁最熟悉<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">puppeteer</code>，那我估计就是<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">puppeteer官方文档</code>了。<em style=\"font-style: normal; color: #7b1fa2; font-weight: bold;\">英文不要怕，实在不行就翻译呗~ 电脑又不会爆炸💥</em></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">假设~ 你已经看了看puppeteer文档↓↓↓</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">开干！</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">npm&nbsp;i&nbsp;puppeteer<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">编写<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">fastify</code>代码 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">导出pdf</code>API:</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>&nbsp;puppeteer&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"puppeteer\"</span>;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>&nbsp;path&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"path\"</span>;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;__filename&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;URL(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>.meta.url).pathname;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;__dirname&nbsp;=&nbsp;path.join(__filename,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"../../public\"</span>);<br><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">export</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">default</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">async</span>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">fastify,&nbsp;opts</span>)&nbsp;</span>{<br>&nbsp;&nbsp;fastify.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"/pdf\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">async</span>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">request,&nbsp;reply</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;访问的地址</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;host&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${request.protocol}</span>://<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${request.hostname}</span>`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;启动&nbsp;puppeteer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;browser&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;puppeteer.launch();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;page&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;browser.newPage();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;访问自己的&nbsp;index.html&nbsp;静态页面</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;page.goto(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${host}</span>/index.html`</span>,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">waitUntil</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"networkidle2\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;导出&nbsp;pdf</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;pdfName&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"test.pdf\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;pdfPath&nbsp;=&nbsp;path.join(__dirname,&nbsp;pdfName);&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;导出文件路径</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;opts&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">width</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"60mm\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">height</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"80mm\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">printBackground</span>:&nbsp;<span class=\"hljs-literal\" style=\"color: #56b6c2; line-height: 26px;\">true</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">path</span>:&nbsp;pdfPath,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;网络可访问静态资源路径</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;resourcePath&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${host}</span>/<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${pdfName}</span>`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;page.pdf(opts);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;browser.close();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;{&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">path</span>:&nbsp;resourcePath&nbsp;};<br>&nbsp;&nbsp;});<br>}<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">以上代码很简单，基本来自<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">puppeteer官方文档</code> <a href=\"https://pptr.dev/guides/pdf-generation\" style=\"text-decoration: none; word-wrap: break-word; color: #6a1b9a; font-weight: normal; border-bottom: 1px solid #7b1fa2;\">https://pptr.dev/guides/pdf-generation</a></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">效果如图：</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/50422843-ecf6-49e6-80df-e277c9e1c61b.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">编写<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">fastify</code>代码 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">导出图片</code>API:</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>&nbsp;puppeteer&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"puppeteer\"</span>;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>&nbsp;path&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">from</span>&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"path\"</span>;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;__filename&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">new</span>&nbsp;URL(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">import</span>.meta.url).pathname;<br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;__dirname&nbsp;=&nbsp;path.join(__filename,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"../../public\"</span>);<br><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">export</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">default</span>&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">async</span>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">fastify,&nbsp;opts</span>)&nbsp;</span>{<br>&nbsp;&nbsp;fastify.get(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"/img\"</span>,&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">async</span>&nbsp;<span class=\"hljs-function\" style=\"line-height: 26px;\"><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">function</span>&nbsp;(<span class=\"hljs-params\" style=\"line-height: 26px;\">request,&nbsp;reply</span>)&nbsp;</span>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;访问的地址</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;host&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${request.protocol}</span>://<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${request.hostname}</span>`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;启动&nbsp;puppeteer</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;browser&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;puppeteer.launch();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;page&nbsp;=&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;browser.newPage();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;访问自己的&nbsp;index.html&nbsp;静态页面</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;page.goto(<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${host}</span>/index.html`</span>,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">waitUntil</span>:&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"networkidle2\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;设置页面大小</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;page.setViewport({&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">width</span>:&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">parseInt</span>(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">60</span>&nbsp;*&nbsp;(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">96</span>&nbsp;/&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">25.4</span>)),&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">height</span>:&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">parseInt</span>(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">80</span>&nbsp;*&nbsp;(<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">96</span>&nbsp;/&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">25.4</span>))&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;导出&nbsp;图片</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;imgName&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"test.png\"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;imgPath&nbsp;=&nbsp;path.join(__dirname,&nbsp;imgName);&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;导出文件路径</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;opts&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">path</span>:&nbsp;imgPath,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">//&nbsp;网络可访问静态资源路径</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">const</span>&nbsp;resourcePath&nbsp;=&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">`<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${host}</span>/<span class=\"hljs-subst\" style=\"color: #e06c75; line-height: 26px;\">${imgName}</span>`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;page.screenshot(opts);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">await</span>&nbsp;browser.close();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">return</span>&nbsp;{&nbsp;<span class=\"hljs-attr\" style=\"color: #d19a66; line-height: 26px;\">path</span>:&nbsp;resourcePath&nbsp;};<br>&nbsp;&nbsp;});<br>}<br></code></pre> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">其中<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">setViewport</code>设置<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">页面大小</code>的<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">单位</code>是<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">px</code></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">效果如图：</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/09d404ba-2d07-45f1-b8e2-fab328778f86.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">至此 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">puppeteer</code> <em style=\"font-style: normal; color: #7b1fa2; font-weight: bold;\">导出pdf、图片</em>已完成。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">大家一定要多看官方文档！ 多检索官方文档~</code></p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">部署又是一番折腾</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><em style=\"font-style: normal; color: #7b1fa2; font-weight: bold;\">开发环境始终和部署环境始终是有所不一样的。</em></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">在还没有部署之前，我就已经猜到了。正式 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Linux 环境肯定又得折腾</code>，而且<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">还不好乱搞</code>，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">不能影响其他正常服务</code>。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">所以这次也是搞了一波<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">docekr</code>。 大致几个问题：</p> \n<ol data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;\"> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    国内环境网络是否能正常拉取镜像？ \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    如何编写构建镜像？ \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    如何构建运行？ \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\">\n    中文乱码问题 \n  </section></li> \n</ol> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">所以一些常见技术无论前端后端，都需要关注了解</code></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">首先在项目根目录 新建一个<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Dockerfile</code></p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/user/40173/ba7ff209-911e-4b02-9a0d-f76f28f95733.png\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">这里我就不赘述了，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">大家直接看代码</code>吧(我的<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">保姆级注释</code>)：</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/pic/8a18d1b1-05f2-4450-8b41-b216808a7972.gif\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\"><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;使用官方Node.js基础镜像（这里用了镜像：国内网络环境问题...）</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">FROM</span>&nbsp;hub.rat.dev/library/node:<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">18</span>-alpine3.<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">19</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;设置工作目录</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">WORKDIR</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;/app</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;复制package.json文件和package-lock.json文件（如果存在）</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">COPY</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;package*.json&nbsp;.</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;安装项目依赖</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">RUN</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;npm&nbsp;config&nbsp;<span class=\"hljs-built_in\" style=\"color: #e6c07b; line-height: 26px;\">set</span>&nbsp;registry&nbsp;https://registry.npmmirror.com/</span><br><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">RUN</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;npm&nbsp;install</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;阿里云镜像</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">RUN</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;sed&nbsp;-i&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">'s/dl-cdn.alpinelinux.org/mirrors.aliyun.com/g'</span>&nbsp;/etc/apk/repositories&nbsp;</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;安装必要的依赖</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">RUN</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;apk&nbsp;add&nbsp;--no-cache&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chromium&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nss&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;freetype&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;harfbuzz&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ca-certificates&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ttf-freefont&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodejs&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;yarn&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;中文字体乱码问题</span></span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ttf-dejavu&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;font-droid-nonlatin&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msttcorefonts-installer&nbsp;fontconfig&nbsp;&amp;&amp;&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;update-ms-fonts&nbsp;&amp;&amp;&nbsp;\\<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fc-cache&nbsp;-f<br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;安装puppeteer依赖</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">ENV</span>&nbsp;PUPPETEER_EXECUTABLE_PATH=/usr/bin/chromium-browser<br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;设置时区为上海</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">ENV</span>&nbsp;TZ=Asia/Shanghai<br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;设置语言为中文</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">ENV</span>&nbsp;LANG=zh_CN.UTF-<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">8</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;安装&nbsp;puppeteer</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">RUN</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;yarn&nbsp;add&nbsp;puppeteer@13.5.0</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;复制项目文件到工作目录</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">COPY</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;.&nbsp;.</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;暴露容器端口</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">EXPOSE</span>&nbsp;<span class=\"hljs-number\" style=\"color: #d19a66; line-height: 26px;\">3000</span><br><br><span class=\"hljs-comment\" style=\"color: #5c6370; font-style: italic; line-height: 26px;\">#&nbsp;运行Node.js应用</span><br><span class=\"hljs-keyword\" style=\"color: #c678dd; line-height: 26px;\">CMD</span><span class=\"bash\" style=\"line-height: 26px;\">&nbsp;[<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"npm\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"run\"</span>,&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"start\"</span>]</span><br></code></pre> \n<h4 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"height: 16px; line-height: 16px; font-size: 16px;\"><span style=\"background-image: url(https://files.mdnice.com/user/40173/2b9c9807-4262-40c6-b8a4-c70328288de5.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;\"></span>1. 网络环境问题：</span><span class=\"suffix\" style=\"display: none;\"></span></h4> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">设置镜像地址，然后重启docker</p> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">sudo&nbsp;tee&nbsp;/etc/docker/daemon.json&nbsp;&lt;&lt;EOF<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"registry-mirrors\"</span>:&nbsp;[<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://docker.anyhub.us.kg\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://dockerhub.jobcher.com\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class=\"hljs-string\" style=\"color: #98c379; line-height: 26px;\">\"https://dockerhub.icu\"</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;]<br>}<br>EOF<br>sudo&nbsp;systemctl&nbsp;daemon-reload<br>sudo&nbsp;systemctl&nbsp;restart&nbsp;docker<br></code></pre> \n<h4 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"height: 16px; line-height: 16px; font-size: 16px;\"><span style=\"background-image: url(https://files.mdnice.com/user/40173/2b9c9807-4262-40c6-b8a4-c70328288de5.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;\"></span>2. 构建镜像</span><span class=\"suffix\" style=\"display: none;\"></span></h4> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">docker&nbsp;build&nbsp;-t&nbsp;node-puppeteer&nbsp;.<br></code></pre> \n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\"> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"> <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">-t node-puppeteer</code>：指定<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">构建</code>的<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">镜像名称</code>为 “node-puppeteer”。这里的 “node-puppeteer” 可以是任何你想要的名称，它将用于标识这个特定的镜像。 \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"> <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">.</code>：表示 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Dockerfile 所在的当前目录</code>。<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Docker</code> 会在这个<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">目录中查找</code>名为 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">“Dockerfile” </code>的文件，并<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">根据其中的指令来构建镜像</code>。 \n  </section></li> \n</ul> \n<h4 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"height: 16px; line-height: 16px; font-size: 16px;\"><span style=\"background-image: url(https://files.mdnice.com/user/40173/2b9c9807-4262-40c6-b8a4-c70328288de5.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;\"></span>3. 构建运行</span><span class=\"suffix\" style=\"display: none;\"></span></h4> \n<pre class=\"custom\" data-tool=\"mdnice编辑器\" style=\"margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px; text-align: left;\"><span style=\"display: block; background: url(https://files.mdnice.com/user/3441/876cad08-0422-409d-bb5a-08afec5da8ee.svg); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #282c34; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;\"></span><code class=\"hljs\" style=\"overflow-x: auto; padding: 16px; color: #abb2bf; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #282c34; border-radius: 5px;\">docker&nbsp;run&nbsp;-d&nbsp;--name&nbsp;node-puppeteer&nbsp;-p&nbsp;3000:3000&nbsp;node-puppeteer:latest<br></code></pre> \n<ul data-tool=\"mdnice编辑器\" style=\"margin-top: 8px; margin-bottom: 8px; padding-left: 25px; font-size: 15px; color: #595959; list-style-type: circle;\"> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"> \n   <p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">-d</code>：表示以<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">分离模式</code>（detached mode）运行容器，即在<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">后台运行容器</code>，不会将容器的输出直接打印到终端。</p> \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"> \n   <p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">--name node-puppeteer</code>：为容器指定一个名称为 “node-puppeteer”。这样可以方便地通过名称来管理和引用这个容器。</p> \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"> \n   <p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">-p 3000:3000</code>：进行端口映射。将<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">容器内部</code>的 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">3000 端口</code>映射到<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">主机</code>的 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">3000 端口</code>。这意味着可以通过访问主机的 3000 端口来访问容器内运行在 3000 端口的服务。</p> \n  </section></li> \n <li> \n  <section style=\"margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;\"> \n   <p style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">node-puppeteer:latest</code>：指定要<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">运行</code>的 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Docker</code> 镜像<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">名称和标签</code>。这里表示使用名为 “node-puppeteer” 且标签为 “latest” 的镜像来创建容器。</p> \n  </section></li> \n</ul> \n<h4 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;\"><span class=\"prefix\" style=\"display: none;\"></span><span class=\"content\" style=\"height: 16px; line-height: 16px; font-size: 16px;\"><span style=\"background-image: url(https://files.mdnice.com/user/40173/2b9c9807-4262-40c6-b8a4-c70328288de5.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;\"></span>4. 中文乱码问题</span><span class=\"suffix\" style=\"display: none;\"></span></h4> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">最开始构建的时候遇到了，最后才修改成了上面的<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Dockerfile</code>:</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">解决方式就是 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">安装字体</code> 😄</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/pic/eccad4a7-7953-40a0-89d4-5a728e621549.gif\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">见上方 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Dockerfile</code></p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">docker</code>不熟悉的童鞋，可以去看看官方文档或者其他文章。</p> \n<h2 data-tool=\"mdnice编辑器\" style=\"margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #6a1b9a;\"><span class=\"prefix\" style=\"display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/user/40173/ef5472da-8ee7-48a2-bc73-9217b83d00e1.png); margin-bottom: -22px;\"></span><span class=\"content\" style=\"display: flex; color: #6a1b9a; font-size: 20px; margin-left: 25px;\">总结</span><span class=\"suffix\" style=\"display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(106, 27, 154, 0.5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;\"></span></h2> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">通过结合使用 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Puppeteer</code> 和 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code>，我们<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">可以轻松地在前端</code>实现 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">PDF，图片导出</code>功能。<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Puppeteer</code> 提供了强大的<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">浏览器控制能力</code>，而 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code> 则提供了<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">高效的 Web 服务框架</code>，两者结合起来<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">可以满足各种复杂的业务需求</code>。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">在<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">实际应用中</code>，我们可以<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">根据具体需求</code>调整页面导航、<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">PDF,图片生成选项</code>等<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">参数</code>。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">总之，<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Puppeteer</code> 和 <code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">Fastify</code> 为<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">前端开发人员</code>提供了<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">一种强大的工具组合</code>，可以帮助我们<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">实现各种有趣</code>和<code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">实用的功能</code>。</p> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\">如果过程中遇到什么问题，欢迎各位评论说私信交流~</p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/pic/748ee10f-ad9f-45e4-9236-0f7e3ac97070.gif\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure> \n<p data-tool=\"mdnice编辑器\" style=\"padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;\"><code style=\"font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #7b1fa2; background: RGBA(123, 31, 162, 0.1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;\">点个赞吧~ 手机不会掉地上、电脑也不会爆炸💥</code></p> \n<figure data-tool=\"mdnice编辑器\" style=\"margin: 0; margin-top: 10px; margin-bottom: 10px; display: flex; flex-direction: column; justify-content: center; align-items: center;\"> \n <img src=\"https://files.mdnice.com/pic/f1738407-4724-4de4-ac86-1be58430719d.gif\" alt style=\"max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;\"> \n</figure>",
                "title": "前端导出pdf、图片很难吗？js一把梭~",
                "categoryId": 2,
                "categoryName": "前端",
                "tagId": 102,
                "tagName": "Node.js",
                "userId": 40173,
                "userOutId": "103279795682",
                "username": "不简说",
                "avatar": "https://files.mdnice.com/pic/c4faa4cd-b155-4d55-9210-33164d6e59d9.jpeg",
                "description": "前端开发已经越来越深入啦~js也早就不仅仅是前端专属了。nodejs已经v20啦~如果你开发过小程序、app。不知道有没有做过海报分享、导出pdf文件等需求。今天就用前端三件套(html+css+js",
                "level": 2,
                "publishTime": "2024/09/03",
                "readingNum": 9,
                "likeNum": 0,
                "introduction": null,
                "followWords": null,
                "followPic": "https://files.mdnice.com/pic/390f432c-27bc-4346-bac9-1e5a7f0f715e.jpeg",
                "isFollowing": false,
                "isLike": false,
                "isSelf": false,
                "type": 1,
                "isVisible": true,
                "invisibleReason": null,
                "writingColumn": {
                    "columnOutId": "816208d1d0e24ea7ab95aba477e46a06",
                    "name": "默认专栏",
                    "briefIntro": "这是一个默认专栏",
                    "cover": "https://files.mdnice.com/common/community/default-column-cover.jpg",
                    "writingNum": 16,
                    "createTime": "2024-08-06 19:05"
                }
            }
        },
        "__N_SSP": true
    },
    "page": "/writing/[id]",
    "query": {
        "id": "f6c5ab3b37614e15afc54a4254c95ad0"
    },
    "buildId": "ErZPkD4oq6iwH2nj6Dpcx",
    "isFallback": false,
    "gssp": true,
    "appGip": true
}